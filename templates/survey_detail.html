{% extends "base.html" %}

{% block title %}Survey Details: {{ date }} | AeroCore Intelligence{% endblock %}

{% block breadcrumb %}Dashboard / Survey Logs / {{ date }}{% endblock %}

{% block content %}
<div style="margin-bottom: 2.5rem; display: flex; justify-content: space-between; align-items: flex-end;">
    <div>
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem; color: var(--text-main);">SURVEY DATA: {{ date }}</h1>
        <p style="color: var(--text-muted);">Media artifacts and telemetry captured during mission {{ date }}</p>
    </div>
    <a href="{{ url_for('survey_logs') }}" class="btn-aero btn-outline">
        <i class="fa-solid fa-arrow-left"></i> Back to Logs
    </a>
</div>

<div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
    <!-- Images Gallery -->
    <div class="glass-panel" style="padding: 0;">
        <div class="module-header" style="padding: 1.5rem 2rem; border-bottom: 1px solid var(--border);">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <i class="fa-solid fa-camera text-primary"></i>
                <h3 style="margin: 0;">IMAGE GALLERY</h3>
            </div>
            <span style="font-size: 0.75rem; color: var(--text-muted);">{{ images|length }} captures</span>
        </div>
        <div style="padding: 2rem;">
            {% if images %}
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 1rem;">
                {% for img in images %}
                <div class="glass-panel"
                    style="padding: 0.5rem; border: 1px solid var(--border); overflow: hidden; transition: var(--transition); cursor: pointer;"
                    onmouseover="this.style.borderColor='var(--primary)'"
                    onmouseout="this.style.borderColor='var(--border)'">
                    <img src="{{ url_for('serve_media', date=date, type='images', filename=img) }}"
                        style="width: 100%; height: 120px; object-fit: cover; border-radius: var(--radius-sm);"
                        alt="{{ img }}">
                    <p
                        style="font-size: 0.625rem; color: var(--text-dim); margin-top: 0.5rem; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                        {{ img }}</p>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div style="text-align: center; padding: 4rem 2rem; color: var(--text-muted);">
                <i class="fa-solid fa-image" style="font-size: 2.5rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                <p>No images found for this mission.</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Videos List -->
    <div class="glass-panel" style="padding: 0;">
        <div class="module-header" style="padding: 1.5rem 2rem; border-bottom: 1px solid var(--border);">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <i class="fa-solid fa-video text-secondary"></i>
                <h3 style="margin: 0;">VIDEO RECORDS</h3>
            </div>
        </div>
        <div style="padding: 2rem;">
            {% if videos %}
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                {% for vid in videos %}
                <div class="glass-panel"
                    style="display: flex; align-items: center; gap: 1rem; padding: 1rem; border: 1px solid var(--border);">
                    <div
                        style="width: 40px; height: 40px; border-radius: var(--radius-sm); background: rgba(125, 95, 255, 0.1); display: flex; align-items: center; justify-content: center; border: 1px solid var(--secondary-glow);">
                        <i class="fa-solid fa-play text-secondary"></i>
                    </div>
                    <div style="flex: 1; overflow: hidden;">
                        <p
                            style="margin: 0; font-size: 0.875rem; color: var(--text-main); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                            {{ vid }}</p>
                        <p style="margin: 0; font-size: 0.625rem; color: var(--text-muted);">Video Data Stream</p>
                    </div>
                    <a href="{{ url_for('serve_media', date=date, type='videos', filename=vid) }}" target="_blank"
                        style="color: var(--secondary);"><i class="fa-solid fa-download"></i></a>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div style="text-align: center; padding: 4rem 2rem; color: var(--text-muted);">
                <i class="fa-solid fa-film" style="font-size: 2.5rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                <p>No video records found.</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}